<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crop Lifecycle Tracker</title>
    <!-- Multilingual Font Imports -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&family=Noto+Sans+Tamil:wght@400;700&family=Noto+Sans+Telugu:wght@400;700&family=Noto+Sans+Malayalam:wght@400;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* ================= THEME ================= */
        :root {
            --primary-color: #2e7d32;
            --secondary-color: #5d4037;
            --background-color: #e8f5e9;
            --header-bg: #2e7d32;
            --header-text: #fff;
            --text-color: #333;
            --card-bg: #fff;
        }

        /* ================= BODY ================= */
        body {
            background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
            /* Updated Font Stack to support Indian languages */
            font-family: 'Noto Sans Devanagari', 'Noto Sans Tamil', 'Noto Sans Telugu', 'Noto Sans Malayalam', 'Noto Sans', 'Georgia', serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* ================= iPHONE 16 PRO MAX FRAME ================= */
        .mobile-frame {
            width: 430px;
            height: 932px;
            background: #fff;
            border-radius: 50px;
            border: 12px solid #111;
            box-shadow: 0 25px 60px rgba(0,0,0,0.4);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Notch (kept for visual fidelity) */
        .notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 180px;
            height: 30px;
            background: #111;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            z-index: 10;
        }

        /* ================= APP CONTAINER ================= */
        .container {
            flex: 1;
            background: var(--card-bg);
            border-radius: 0;
            padding: 25px;
            text-align: center;
            animation: fadeIn 0.8s ease-in-out;
            overflow-y: auto;
        }

        /* ================= HEADER ================= */
        .container h1 {
            font-size: 22px;
            color: var(--primary-color);
            margin-bottom: 20px;
            line-height: 1.4;
        }

        /* ================= FORM ================= */
        .input-group { 
            text-align: left;
            margin-bottom: 18px;
        }

        .input-group label {
            font-size: 14px;
            font-weight: 600;
            display: block;
            margin-bottom: 6px;
            color: var(--text-color);
        }

        .input-group select,
        .input-group input[type="date"] {
            width: 100%;
            padding: 12px 14px;
            border-radius: 10px;
            border: 2px solid #ccc;
            font-size: 15px;
            transition: 0.3s;
            background-color: #fff; 
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            position: relative;
            font-family: inherit; /* Inherit new multilingual font stack */
        }

        /* Custom arrow for select */
        .input-group select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666' width='24px' height='24px'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            padding-right: 30px;
        }
        
        /* Clear default date picker icon for consistency */
        .input-group input[type="date"]::-webkit-calendar-picker-indicator {
            background: none;
            width: 24px;
            height: 24px;
            cursor: pointer;
            position: absolute;
            right: 10px;
            opacity: 1;
        }

        .input-group select:focus,
        .input-group input[type="date"]:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(46,125,50,0.3);
            outline: none;
        }

        /* ================= BUTTON ================= */
        .btn {
            width: 100%;
            background: var(--primary-color);
            color: #fff;
            padding: 14px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: 0.2s;
        }
        .btn:hover { background: #1b5e20; transform: scale(1.03); }
        .btn:active { transform: scale(0.95); }

        /* ================= RESULTS ================= */
        #calendar_results {
            margin-top: 22px;
            background: var(--background-color);
            padding: 16px;
            border-radius: 14px;
            min-height: 80px;
            font-size: 15px;
            color: var(--text-color);
            animation: fadeInUp 0.6s ease;
        }

        .initial-message, .error-message, .loading-message, .no-events-message {
            opacity: 0.7;
            font-size: 14px;
            text-align: center;
            padding: 10px;
        }

        .error-message {
            color: red;
        }

        .event-card {
            background-color: #fff;
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--primary-color);
            text-align: left;
            transition: transform 0.2s ease;
        }

        .event-card:hover {
            transform: translateY(-3px);
        }

        .event-card h3 {
            margin: 0;
            font-size: 16px;
            color: var(--primary-color);
        }

        .event-card p {
            margin: 4px 0 0;
            font-size: 13px;
            color: var(--secondary-color);
        }

        /* ================= ANIMATIONS ================= */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Floating bubbles background */
        .background-animation {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        .background-animation::before,
        .background-animation::after {
            content: '';
            position: absolute;
            width: 300px; height: 300px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            animation: float 10s infinite;
        }
        .background-animation::after {
            width: 200px; height: 200px;
            top: 20%; left: 70%;
            animation-duration: 14s;
        }

        @keyframes float {
            0% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-40px) translateX(30px); }
            100% { transform: translateY(0) translateX(0); }
        }
    </style>
</head>
<body>
    <div class="background-animation"></div>

    <div class="mobile-frame">
        <div class="container">
            <header class="app-header">
                <!-- Added ID for translation -->
                <h1 id="main_title">ðŸŒ± Crop Lifecycle Tracker ðŸŒ¾</h1>
            </header>

            <form id="cropForm">
                <section class="input-section">
                    <div class="input-group">
                        <!-- Added ID for translation -->
                        <label for="crop_name" id="label_crop">Select Crop:</label>
                        <select name="crop_name" id="crop_name">
                        </select>
                    </div>

                    <div class="input-group">
                        <!-- Added ID for translation -->
                        <label for="sowing_date" id="label_date">Sowing Date:</label>
                        <input type="date" name="sowing_date" id="sowing_date" required>
                    </div>

                    <!-- Added ID for translation -->
                    <button type="submit" class="btn" id="btn_submit">Generate Calendar</button>
                </section>
            </form>

            <section id="calendar_results" class="schemes-section">
                <!-- Added ID for translation -->
                <p id="initial_msg" class="initial-message">Select a crop and sowing date to generate its lifecycle calendar.</p>
            </section>
        </div>
    </div>

    <script>
        // Retrieve chosen language from local storage
        const currentLanguage = localStorage.getItem("chosenLanguage") || "en";

        // --- 1. TRANSLATION DICTIONARY (Updated for Crop Lifecycle Tracker) ---
        const staticUITranslations = {
            "hi": {
                "Crop Lifecycle Tracker": "à¤«à¤¸à¤² à¤œà¥€à¤µà¤¨à¤šà¤•à¥à¤° à¤Ÿà¥à¤°à¥ˆà¤•à¤°",
                "Select Crop:": "à¤«à¤¸à¤² à¤šà¥à¤¨à¥‡à¤‚:",
                "Sowing Date:": "à¤¬à¥à¤µà¤¾à¤ˆ à¤•à¥€ à¤¤à¤¾à¤°à¥€à¤–:",
                "Generate Calendar": "à¤•à¥ˆà¤²à¥‡à¤‚à¤¡à¤° à¤¬à¤¨à¤¾à¤à¤‚",
                "Select a crop and sowing date to generate its lifecycle calendar.": "à¤‡à¤¸à¤•à¤¾ à¤œà¥€à¤µà¤¨à¤šà¤•à¥à¤° à¤•à¥ˆà¤²à¥‡à¤‚à¤¡à¤° à¤¬à¤¨à¤¾à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤à¤• à¤«à¤¸à¤² à¤”à¤° à¤¬à¥à¤µà¤¾à¤ˆ à¤•à¥€ à¤¤à¤¾à¤°à¥€à¤– à¤šà¥à¤¨à¥‡à¤‚à¥¤",
                "Generating calendar...": "à¤•à¥ˆà¤²à¥‡à¤‚à¤¡à¤° à¤¬à¤¨à¤¾à¤¯à¤¾ à¤œà¤¾ à¤°à¤¹à¤¾ à¤¹à¥ˆ...",
                "Error: Please select a sowing date.": "à¤¤à¥à¤°à¥à¤Ÿà¤¿: à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¬à¥à¤µà¤¾à¤ˆ à¤•à¥€ à¤¤à¤¾à¤°à¥€à¤– à¤šà¥à¤¨à¥‡à¤‚à¥¤",
                "Error: Crop not found in data.": "à¤¤à¥à¤°à¥à¤Ÿà¤¿: à¤¡à¥‡à¤Ÿà¤¾ à¤®à¥‡à¤‚ à¤«à¤¸à¤² à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¥€à¥¤",
                "No events found for this crop.": "à¤‡à¤¸ à¤«à¤¸à¤² à¤•à¥‡ à¤²à¤¿à¤ à¤•à¥‹à¤ˆ à¤‡à¤µà¥‡à¤‚à¤Ÿ à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¤¾à¥¤",
                "to": "à¤¸à¥‡",
                "Sowing": "à¤¬à¥à¤µà¤¾à¤ˆ",
                "First Nitrogen application": "à¤ªà¤¹à¤²à¤¾ à¤¨à¤¾à¤‡à¤Ÿà¥à¤°à¥‹à¤œà¤¨ à¤ªà¥à¤°à¤¯à¥‹à¤—",
                "Tasseling and second Nitrogen application": "à¤Ÿà¥‡à¤¸à¤²à¤¿à¤‚à¤— à¤”à¤° à¤¦à¥‚à¤¸à¤°à¤¾ à¤¨à¤¾à¤‡à¤Ÿà¥à¤°à¥‹à¤œà¤¨ à¤ªà¥à¤°à¤¯à¥‹à¤—",
                "Silking and grain filling": "à¤¸à¤¿à¤²à¥à¤•à¤¿à¤‚à¤— à¤”à¤° à¤¦à¤¾à¤¨à¤¾ à¤­à¤°à¤¨à¤¾",
                "Harvest": "à¤•à¤Ÿà¤¾à¤ˆ",
                "First Irrigation (Crown Root Initiation)": "à¤ªà¤¹à¤²à¥€ à¤¸à¤¿à¤‚à¤šà¤¾à¤ˆ (à¤•à¥à¤°à¤¾à¤‰à¤¨ à¤°à¥‚à¤Ÿ à¤ªà¤¹à¤²)",
                "Second Irrigation (Jointing stage)": "à¤¦à¥‚à¤¸à¤°à¥€ à¤¸à¤¿à¤‚à¤šà¤¾à¤ˆ (à¤œà¥‹à¥œ à¤šà¤°à¤£)",
                "Third Irrigation (Boot/Flowering stage)": "à¤¤à¥€à¤¸à¤°à¥€ à¤¸à¤¿à¤‚à¤šà¤¾à¤ˆ (à¤¬à¥‚à¤Ÿ/à¤«à¥‚à¤² à¤†à¤¨à¥‡ à¤•à¤¾ à¤šà¤°à¤£)",
                "Sowing in nursery": "à¤¨à¤°à¥à¤¸à¤°à¥€ à¤®à¥‡à¤‚ à¤¬à¥à¤µà¤¾à¤ˆ",
                "Transplanting to main field": "à¤®à¥à¤–à¥à¤¯ à¤–à¥‡à¤¤ à¤®à¥‡à¤‚ à¤°à¥‹à¤ªà¤¾à¤ˆ",
                "Tillering (new shoots from base)": "à¤Ÿà¤¿à¤²à¤°à¤¿à¤‚à¤— (à¤†à¤§à¤¾à¤° à¤¸à¥‡ à¤¨à¤ˆ à¤Ÿà¤¹à¤¨à¤¿à¤¯à¤¾à¤)",
                "Panicle initiation": "à¤ªà¥ˆà¤¨à¤¿à¤•à¤² à¤•à¥€ à¤ªà¤¹à¤²",
                "Flowering/Grain filling": "à¤«à¥‚à¤² à¤†à¤¨à¤¾/à¤¦à¤¾à¤¨à¤¾ à¤­à¤°à¤¨à¤¾",
                "Planting": "à¤°à¥‹à¤ªà¤£",
                "First Earthing up": "à¤ªà¤¹à¤²à¤¾ à¤®à¤¿à¤Ÿà¥à¤Ÿà¥€ à¤šà¤¢à¤¼à¤¾à¤¨à¤¾",
                "Second Earthing up": "à¤¦à¥‚à¤¸à¤°à¤¾ à¤®à¤¿à¤Ÿà¥à¤Ÿà¥€ à¤šà¤¢à¤¼à¤¾à¤¨à¤¾",
                "Tuber development": "à¤•à¤‚à¤¦ à¤µà¤¿à¤•à¤¾à¤¸",
                "First Fertilizer application and Weeding": "à¤ªà¤¹à¤²à¤¾ à¤‰à¤°à¥à¤µà¤°à¤• à¤ªà¥à¤°à¤¯à¥‹à¤— à¤”à¤° à¤¨à¤¿à¤°à¤¾à¤ˆ",
                "Flowering begins": "à¤«à¥‚à¤² à¤†à¤¨à¤¾ à¤¶à¥à¤°à¥‚",
                "First Harvest": "à¤ªà¤¹à¤²à¥€ à¤•à¤Ÿà¤¾à¤ˆ",
                "First Fertilizer application": "à¤ªà¤¹à¤²à¤¾ à¤‰à¤°à¥à¤µà¤°à¤• à¤ªà¥à¤°à¤¯à¥‹à¤—",
                "Budding/Flowering": "à¤•à¤²à¤¿à¤•à¤¾/à¤«à¥‚à¤² à¤†à¤¨à¤¾",
                "Bunch emergence": "à¤—à¥à¤šà¥à¤›à¤¾ à¤•à¤¾ à¤‰à¤­à¤°à¤¨à¤¾",
                "Planting stem cuttings": "à¤¤à¤¨à¥‡ à¤•à¥€ à¤•à¤Ÿà¤¿à¤‚à¤— à¤°à¥‹à¤ªà¤¨à¤¾",
                "First weeding": "à¤ªà¤¹à¤²à¥€ à¤¨à¤¿à¤°à¤¾à¤ˆ",
                "Second weeding and Earthing up": "à¤¦à¥‚à¤¸à¤°à¥€ à¤¨à¤¿à¤°à¤¾à¤ˆ à¤”à¤° à¤®à¤¿à¤Ÿà¥à¤Ÿà¥€ à¤šà¤¢à¤¼à¤¾à¤¨à¤¾",
                "Root bulking stage": "à¤œà¤¡à¤¼ à¤«à¥‚à¤²à¤¨à¥‡ à¤•à¤¾ à¤šà¤°à¤£",
                "Weeding and first intercultural operation": "à¤¨à¤¿à¤°à¤¾à¤ˆ à¤”à¤° à¤ªà¤¹à¤²à¤¾ à¤…à¤‚à¤¤à¤°-à¤¸à¤¾à¤‚à¤¸à¥à¤•à¥ƒà¤¤à¤¿à¤• à¤¸à¤‚à¤šà¤¾à¤²à¤¨",
                "Flowering and pod formation": "à¤«à¥‚à¤² à¤†à¤¨à¤¾ à¤”à¤° à¤«à¤²à¥€ à¤¬à¤¨à¤¨à¤¾",
                "Pod filling": "à¤«à¤²à¥€ à¤­à¤°à¤¨à¤¾",
                "Maize (Corn)": "à¤®à¤•à¥à¤•à¤¾ (à¤•à¥‰à¤°à¥à¤¨)",
                "Wheat": "à¤—à¥‡à¤¹à¥‚à¤",
                "Rice": "à¤šà¤¾à¤µà¤²",
                "Potatoes": "à¤†à¤²à¥‚",
                "Sugarcane": "à¤—à¤¨à¥à¤¨à¤¾",
                "Soybeans": "à¤¸à¥‹à¤¯à¤¾à¤¬à¥€à¤¨",
                "Cassava": "à¤•à¤¸à¤¾à¤µà¤¾",
                "Barley": "à¤œà¥Œ",
                "Tomatoes": "à¤Ÿà¤®à¤¾à¤Ÿà¤°",
                "Bananas": "à¤•à¥‡à¤²à¥‡"
            },
            // Tamil (ta) Translations
            "ta": {
                "Crop Lifecycle Tracker": "à®ªà®¯à®¿à®°à¯ à®µà®¾à®´à¯à®•à¯à®•à¯ˆà®šà¯ à®šà¯à®´à®±à¯à®šà®¿ à®•à®£à¯à®•à®¾à®£à®¿à®ªà¯à®ªà®¾à®©à¯",
                "Select Crop:": "à®ªà®¯à®¿à®°à¯ˆà®¤à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯:",
                "Sowing Date:": "à®µà®¿à®¤à¯ˆà®•à¯à®•à¯à®®à¯ à®¤à¯‡à®¤à®¿:",
                "Generate Calendar": "à®¨à®¾à®Ÿà¯à®•à®¾à®Ÿà¯à®Ÿà®¿à®¯à¯ˆ à®‰à®°à¯à®µà®¾à®•à¯à®•à®µà¯à®®à¯",
                "Select a crop and sowing date to generate its lifecycle calendar.": "à®…à®¤à®©à¯ à®µà®¾à®´à¯à®•à¯à®•à¯ˆà®šà¯ à®šà¯à®´à®±à¯à®šà®¿ à®¨à®¾à®Ÿà¯à®•à®¾à®Ÿà¯à®Ÿà®¿à®¯à¯ˆ à®‰à®°à¯à®µà®¾à®•à¯à®• à®’à®°à¯ à®ªà®¯à®¿à®°à¯ à®®à®±à¯à®±à¯à®®à¯ à®µà®¿à®¤à¯ˆà®•à¯à®•à¯à®®à¯ à®¤à¯‡à®¤à®¿à®¯à¯ˆà®¤à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.",
                "Generating calendar...": "à®¨à®¾à®Ÿà¯à®•à®¾à®Ÿà¯à®Ÿà®¿ à®‰à®°à¯à®µà®¾à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®•à®¿à®±à®¤à¯...",
                "Error: Please select a sowing date.": "à®ªà®¿à®´à¯ˆ: à®µà®¿à®¤à¯ˆà®•à¯à®•à¯à®®à¯ à®¤à¯‡à®¤à®¿à®¯à¯ˆà®¤à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.",
                "Error: Crop not found in data.": "à®ªà®¿à®´à¯ˆ: à®¤à®°à®µà¯à®•à®³à®¿à®²à¯ à®ªà®¯à®¿à®°à¯ à®•à®¾à®£à®ªà¯à®ªà®Ÿà®µà®¿à®²à¯à®²à¯ˆ.",
                "No events found for this crop.": "à®‡à®¨à¯à®¤à®ªà¯ à®ªà®¯à®¿à®°à¯à®•à¯à®•à¯ à®¨à®¿à®•à®´à¯à®µà¯à®•à®³à¯ à®Žà®¤à¯à®µà¯à®®à¯ à®•à®¾à®£à®ªà¯à®ªà®Ÿà®µà®¿à®²à¯à®²à¯ˆ.",
                "to": "à®®à¯à®¤à®²à¯",
                "Sowing": "à®µà®¿à®¤à¯ˆà®¤à¯à®¤à®²à¯",
                "First Nitrogen application": "à®®à¯à®¤à®²à¯ à®¨à¯ˆà®Ÿà¯à®°à®œà®©à¯ à®ªà®¯à®©à¯à®ªà®¾à®Ÿà¯",
                "Tasseling and second Nitrogen application": "à®¤à®¾à®¸à¯à®²à®¿à®™à¯ à®®à®±à¯à®±à¯à®®à¯ à®‡à®°à®£à¯à®Ÿà®¾à®µà®¤à¯ à®¨à¯ˆà®Ÿà¯à®°à®œà®©à¯ à®ªà®¯à®©à¯à®ªà®¾à®Ÿà¯",
                "Silking and grain filling": "à®šà®¿à®²à¯à®•à¯à®•à®¿à®™à¯ à®®à®±à¯à®±à¯à®®à¯ à®¤à®¾à®©à®¿à®¯ à®¨à®¿à®°à®ªà¯à®ªà¯à®¤à®²à¯",
                "Harvest": "à®…à®±à¯à®µà®Ÿà¯ˆ",
                "First Irrigation (Crown Root Initiation)": "à®®à¯à®¤à®²à¯ à®¨à¯€à®°à¯à®ªà¯à®ªà®¾à®šà®©à®®à¯ (à®•à®¿à®°à®µà¯à®©à¯ à®°à¯‚à®Ÿà¯ à®†à®°à®®à¯à®ªà®®à¯)",
                "Second Irrigation (Jointing stage)": "à®‡à®°à®£à¯à®Ÿà®¾à®µà®¤à¯ à®¨à¯€à®°à¯à®ªà¯à®ªà®¾à®šà®©à®®à¯ (à®‡à®£à¯ˆà®•à¯à®•à¯à®®à¯ à®¨à®¿à®²à¯ˆ)",
                "Third Irrigation (Boot/Flowering stage)": "à®®à¯‚à®©à¯à®±à®¾à®µà®¤à¯ à®¨à¯€à®°à¯à®ªà¯à®ªà®¾à®šà®©à®®à¯ (à®ªà¯‚à®Ÿà¯/à®ªà¯‚à®•à¯à®•à¯à®®à¯ à®¨à®¿à®²à¯ˆ)",
                "Sowing in nursery": "à®¨à®¾à®±à¯à®±à®™à¯à®•à®¾à®²à®¿à®²à¯ à®µà®¿à®¤à¯ˆà®¤à¯à®¤à®²à¯",
                "Transplanting to main field": "à®®à¯à®¤à®©à¯à®®à¯ˆà®•à¯ à®•à®³à®¤à¯à®¤à®¿à®±à¯à®•à¯ à®‡à®Ÿà®®à®¾à®±à¯à®±à®®à¯ à®šà¯†à®¯à¯à®¤à®²à¯",
                "Tillering (new shoots from base)": "à®Ÿà®¿à®²à¯à®²à®°à®¿à®™à¯ (à®…à®Ÿà®¿à®µà®¾à®°à®¤à¯à®¤à®¿à®²à¯ à®‡à®°à¯à®¨à¯à®¤à¯ à®ªà¯à®¤à®¿à®¯ à®¤à®³à®¿à®°à¯à®•à®³à¯)",
                "Panicle initiation": "à®ªà®¾à®©à®¿à®•à®¿à®²à¯ à®†à®°à®®à¯à®ªà®®à¯",
                "Flowering/Grain filling": "à®ªà¯‚à®•à¯à®•à¯à®®à¯/à®¤à®¾à®©à®¿à®¯ à®¨à®¿à®°à®ªà¯à®ªà¯à®¤à®²à¯",
                "Planting": "à®¨à®Ÿà®µà¯ à®šà¯†à®¯à¯à®¤à®²à¯",
                "First Earthing up": "à®®à¯à®¤à®²à¯ à®®à®£à¯ à®…à®£à¯ˆà®¤à¯à®¤à®²à¯",
                "Second Earthing up": "à®‡à®°à®£à¯à®Ÿà®¾à®µà®¤à¯ à®®à®£à¯ à®…à®£à¯ˆà®¤à¯à®¤à®²à¯",
                "Tuber development": "à®•à®¿à®´à®™à¯à®•à¯ à®µà®³à®°à¯à®šà¯à®šà®¿",
                "First Fertilizer application and Weeding": "à®®à¯à®¤à®²à¯ à®‰à®°à®®à®¿à®Ÿà¯à®¤à®²à¯ à®®à®±à¯à®±à¯à®®à¯ à®•à®³à¯ˆ à®Žà®Ÿà¯à®¤à¯à®¤à®²à¯",
                "Flowering begins": "à®ªà¯‚à®•à¯à®•à¯à®®à¯ à®†à®°à®®à¯à®ªà®®à¯",
                "First Harvest": "à®®à¯à®¤à®²à¯ à®…à®±à¯à®µà®Ÿà¯ˆ",
                "First Fertilizer application": "à®®à¯à®¤à®²à¯ à®‰à®° à®ªà®¯à®©à¯à®ªà®¾à®Ÿà¯",
                "Budding/Flowering": "à®®à¯Šà®Ÿà¯à®Ÿà¯ à®µà®¿à®Ÿà¯à®¤à®²à¯/à®ªà¯‚à®•à¯à®•à¯à®®à¯",
                "Bunch emergence": "à®•à¯Šà®¤à¯à®¤à¯ à®µà¯†à®³à®¿à®ªà¯à®ªà®Ÿà¯à®¤à®²à¯",
                "Planting stem cuttings": "à®¤à®£à¯à®Ÿà¯ à®µà¯†à®Ÿà¯à®Ÿà¯à®•à®³à¯ˆ à®¨à®Ÿà¯à®¤à®²à¯",
                "First weeding": "à®®à¯à®¤à®²à¯ à®•à®³à¯ˆ à®Žà®Ÿà¯à®¤à¯à®¤à®²à¯",
                "Second weeding and Earthing up": "à®‡à®°à®£à¯à®Ÿà®¾à®µà®¤à¯ à®•à®³à¯ˆ à®Žà®Ÿà¯à®¤à¯à®¤à®²à¯ à®®à®±à¯à®±à¯à®®à¯ à®®à®£à¯ à®…à®£à¯ˆà®¤à¯à®¤à®²à¯",
                "Root bulking stage": "à®µà¯‡à®°à¯ à®ªà¯†à®°à¯à®•à¯à®•à¯à®®à¯ à®¨à®¿à®²à¯ˆ",
                "Weeding and first intercultural operation": "à®•à®³à¯ˆ à®Žà®Ÿà¯à®¤à¯à®¤à®²à¯ à®®à®±à¯à®±à¯à®®à¯ à®®à¯à®¤à®²à¯ à®Šà®Ÿà¯à®ªà®¯à®¿à®°à¯ à®šà¯†à®¯à®²à¯à®ªà®¾à®Ÿà¯",
                "Flowering and pod formation": "à®ªà¯‚à®•à¯à®•à¯à®®à¯ à®®à®±à¯à®±à¯à®®à¯ à®•à®¾à®¯à¯ à®…à®®à¯ˆà®¤à¯à®¤à®²à¯",
                "Pod filling": "à®•à®¾à®¯à¯ à®¨à®¿à®°à®ªà¯à®ªà¯à®¤à®²à¯",
                "Maize (Corn)": "à®®à®•à¯à®•à®¾à®šà¯à®šà¯‹à®³à®®à¯ (à®šà¯‹à®³à®®à¯)",
                "Wheat": "à®•à¯‹à®¤à¯à®®à¯ˆ",
                "Rice": "à®…à®°à®¿à®šà®¿",
                "Potatoes": "à®‰à®°à¯à®³à¯ˆà®•à¯à®•à®¿à®´à®™à¯à®•à¯",
                "Sugarcane": "à®•à®°à¯à®®à¯à®ªà¯",
                "Soybeans": "à®šà¯‹à®¯à®¾à®ªà¯€à®©à¯à®¸à¯",
                "Cassava": "à®®à®°à®µà®³à¯à®³à®¿à®•à¯à®•à®¿à®´à®™à¯à®•à¯",
                "Barley": "à®ªà®¾à®°à¯à®²à®¿",
                "Tomatoes": "à®¤à®•à¯à®•à®¾à®³à®¿",
                "Bananas": "à®µà®¾à®´à¯ˆà®ªà¯à®ªà®´à®™à¯à®•à®³à¯"
            },
            // Malayalam (ml) Translations
            "ml": {
                "Crop Lifecycle Tracker": "à´µà´¿à´³à´¯àµà´Ÿàµ† à´œàµ€à´µà´¿à´¤ à´šà´•àµà´°à´‚ à´Ÿàµà´°à´¾à´•àµà´•àµ¼",
                "Select Crop:": "à´µà´¿à´³ à´¤à´¿à´°à´žàµà´žàµ†à´Ÿàµà´•àµà´•àµà´•:",
                "Sowing Date:": "à´µà´¿à´¤àµà´¤àµ à´µà´¿à´¤à´šàµà´š à´¤àµ€à´¯à´¤à´¿:",
                "Generate Calendar": "à´•à´²à´£àµà´Ÿàµ¼ à´¸àµƒà´·àµà´Ÿà´¿à´•àµà´•àµà´•",
                "Select a crop and sowing date to generate its lifecycle calendar.": "à´…à´¤à´¿àµ»àµà´±àµ† à´œàµ€à´µà´¿à´¤ à´šà´•àµà´° à´•à´²à´£àµà´Ÿàµ¼ à´¸àµƒà´·àµà´Ÿà´¿à´•àµà´•à´¾àµ» à´’à´°àµ à´µà´¿à´³à´¯àµà´‚ à´µà´¿à´¤à´šàµà´š à´¤àµ€à´¯à´¤à´¿à´¯àµà´‚ à´¤à´¿à´°à´žàµà´žàµ†à´Ÿàµà´•àµà´•àµà´•.",
                "Generating calendar...": "à´•à´²à´£àµà´Ÿàµ¼ à´¸àµƒà´·àµà´Ÿà´¿à´•àµà´•àµà´¨àµà´¨àµ...",
                "Error: Please select a sowing date.": "à´ªà´¿à´¶à´•àµ: à´µà´¿à´¤à´šàµà´š à´¤àµ€à´¯à´¤à´¿ à´¤à´¿à´°à´žàµà´žàµ†à´Ÿàµà´•àµà´•àµà´•.",
                "Error: Crop not found in data.": "à´ªà´¿à´¶à´•àµ: à´¡à´¾à´±àµà´±à´¯à´¿àµ½ à´µà´¿à´³ à´•à´£àµà´Ÿàµ†à´¤àµà´¤à´¿à´¯à´¿à´²àµà´².",
                "No events found for this crop.": "à´ˆ à´µà´¿à´³à´¯àµà´•àµà´•àµ à´‡à´µàµ»àµà´±àµà´•à´³àµŠà´¨àµà´¨àµà´‚ à´•à´£àµà´Ÿàµ†à´¤àµà´¤à´¿à´¯à´¿à´²àµà´².",
                "to": "à´®àµà´¤àµ½",
                "Sowing": "à´µà´¿à´¤àµà´¤àµ à´µà´¿à´¤à´¯àµà´•àµà´•àµ½",
                "First Nitrogen application": "à´†à´¦àµà´¯à´¤àµà´¤àµ† à´¨àµˆà´Ÿàµà´°à´œàµ» à´ªàµà´°à´¯àµ‹à´—à´‚",
                "Tasseling and second Nitrogen application": "à´Ÿà´¾à´¸àµà´¸àµ†à´²à´¿à´‚à´—àµà´‚ à´°à´£àµà´Ÿà´¾à´®à´¤àµà´¤àµ† à´¨àµˆà´Ÿàµà´°à´œàµ» à´ªàµà´°à´¯àµ‹à´—à´µàµà´‚",
                "Silking and grain filling": "à´¸à´¿àµ½à´•àµà´•à´¿à´‚à´—àµà´‚ à´§à´¾à´¨àµà´¯à´‚ à´¨à´¿à´±à´¯àµà´•àµà´•à´²àµà´‚",
                "Harvest": "à´µà´¿à´³à´µàµ†à´Ÿàµà´ªàµà´ªàµ",
                "First Irrigation (Crown Root Initiation)": "à´†à´¦àµà´¯à´¤àµà´¤àµ† à´œà´²à´¸àµ‡à´šà´¨à´‚ (à´•àµà´°àµ—àµº à´±àµ‚à´Ÿàµà´Ÿàµ à´‡à´¨à´¿à´·àµà´¯àµ‡à´·àµ»)",
                "Second Irrigation (Jointing stage)": "à´°à´£àµà´Ÿà´¾à´®à´¤àµà´¤àµ† à´œà´²à´¸àµ‡à´šà´¨à´‚ (à´œàµ‹à´¯à´¿àµ»àµà´±à´¿à´‚à´—àµ à´˜à´Ÿàµà´Ÿà´‚)",
                "Third Irrigation (Boot/Flowering stage)": "à´®àµ‚à´¨àµà´¨à´¾à´®à´¤àµà´¤àµ† à´œà´²à´¸àµ‡à´šà´¨à´‚ (à´¬àµ‚à´Ÿàµà´Ÿàµ/à´ªàµ‚à´µà´¿à´Ÿàµà´¨àµà´¨ à´˜à´Ÿàµà´Ÿà´‚)",
                "Sowing in nursery": "à´¨àµ‡à´´àµà´¸à´±à´¿à´¯à´¿àµ½ à´µà´¿à´¤àµà´¤àµ à´µà´¿à´¤à´¯àµà´•àµà´•àµ½",
                "Transplanting to main field": "à´ªàµà´°à´§à´¾à´¨ à´µà´¯à´²à´¿à´²àµ‡à´•àµà´•àµ à´ªà´±à´¿à´šàµà´šàµà´¨à´Ÿàµ½",
                "Tillering (new shoots from base)": "à´•à´³ à´ªà´±à´¿à´•àµà´•àµ½ (à´…à´Ÿà´¿à´¤àµà´¤à´Ÿàµà´Ÿà´¿àµ½ à´¨à´¿à´¨àµà´¨àµà´³àµà´³ à´ªàµà´¤à´¿à´¯ à´šà´¿à´¨à´ªàµà´ªàµà´•àµ¾)",
                "Panicle initiation": "à´ªà´¾à´¨à´¿à´•àµà´•à´¿àµ¾ à´†à´°à´‚à´­à´‚",
                "Flowering/Grain filling": "à´ªàµ‚à´µà´¿à´Ÿàµ½/à´§à´¾à´¨àµà´¯à´‚ à´¨à´¿à´±à´¯àµà´•àµà´•àµ½",
                "Planting": "à´¨à´Ÿàµ€àµ½",
                "First Earthing up": "à´†à´¦àµà´¯à´¤àµà´¤àµ† à´®à´£àµà´£àµ à´•àµ‚à´Ÿàµà´Ÿàµ½",
                "Second Earthing up": "à´°à´£àµà´Ÿà´¾à´®à´¤àµà´¤àµ† à´®à´£àµà´£àµ à´•àµ‚à´Ÿàµà´Ÿàµ½",
                "Tuber development": "à´•à´¿à´´à´™àµà´™àµ à´µà´¿à´•à´¸à´¨à´‚",
                "First Fertilizer application and Weeding": "à´†à´¦àµà´¯à´¤àµà´¤àµ† à´µà´³à´ªàµà´°à´¯àµ‹à´—à´µàµà´‚ à´•à´³ à´ªà´±à´¿à´•àµà´•à´²àµà´‚",
                "Flowering begins": "à´ªàµ‚à´µà´¿à´Ÿàµ½ à´†à´°à´‚à´­à´¿à´•àµà´•àµà´¨àµà´¨àµ",
                "First Harvest": "à´†à´¦àµà´¯à´¤àµà´¤àµ† à´µà´¿à´³à´µàµ†à´Ÿàµà´ªàµà´ªàµ",
                "First Fertilizer application": "à´†à´¦àµà´¯à´¤àµà´¤àµ† à´µà´³à´ªàµà´°à´¯àµ‹à´—à´‚",
                "Budding/Flowering": "à´®àµà´•àµà´³à´¨à´‚/à´ªàµ‚à´µà´¿à´Ÿàµ½",
                "Bunch emergence": "à´•àµà´² à´ªàµà´±à´¤àµà´¤àµà´µà´°àµ½",
                "Planting stem cuttings": "à´¤à´£àµà´Ÿàµ à´®àµà´±à´¿à´šàµà´šàµ†à´Ÿàµà´¤àµà´¤àµ à´¨à´Ÿàµ€àµ½",
                "First weeding": "à´†à´¦àµà´¯à´¤àµà´¤àµ† à´•à´³ à´ªà´±à´¿à´•àµà´•àµ½",
                "Second weeding and Earthing up": "à´°à´£àµà´Ÿà´¾à´®à´¤àµà´¤àµ† à´•à´³ à´ªà´±à´¿à´•àµà´•à´²àµà´‚ à´®à´£àµà´£àµ à´•àµ‚à´Ÿàµà´Ÿà´²àµà´‚",
                "Root bulking stage": "à´µàµ‡à´°àµà´•àµ¾ à´µà´²àµà´¤à´¾à´•àµà´¨àµà´¨ à´˜à´Ÿàµà´Ÿà´‚",
                "Weeding and first intercultural operation": "à´•à´³ à´ªà´±à´¿à´•àµà´•à´²àµà´‚ à´†à´¦àµà´¯à´¤àµà´¤àµ† à´‡à´Ÿà´µà´¿à´³ à´ªàµà´°à´µàµ¼à´¤àµà´¤à´¨à´µàµà´‚",
                "Flowering and pod formation": "à´ªàµ‚à´µà´¿à´Ÿà´²àµà´‚ à´•à´¾à´¯àµ à´°àµ‚à´ªàµ€à´•à´°à´£à´µàµà´‚",
                "Pod filling": "à´•à´¾à´¯àµ à´¨à´¿à´±à´¯àµà´•àµà´•àµ½",
                "Maize (Corn)": "à´šàµ‹à´³à´‚",
                "Wheat": "à´—àµ‹à´¤à´®àµà´ªàµ",
                "Rice": "à´¨àµ†à´²àµà´²àµ",
                "Potatoes": "à´‰à´°àµà´³à´•àµà´•à´¿à´´à´™àµà´™àµ",
                "Sugarcane": "à´•à´°à´¿à´®àµà´ªàµ",
                "Soybeans": "à´¸àµ‹à´¯à´¾à´¬àµ€àµ»à´¸àµ",
                "Cassava": "à´®à´°à´šàµà´šàµ€à´¨à´¿",
                "Barley": "à´¬à´¾àµ¼à´²à´¿",
                "Tomatoes": "à´¤à´•àµà´•à´¾à´³à´¿",
                "Bananas": "à´µà´¾à´´à´ªàµà´ªà´´à´‚"
            }
        };

        // --- 2. TRANSLATION CORE LOGIC ---
        async function translateText(text, targetLang) {
            if (targetLang === "en") return text;
            
            // Priority 1: Check the local dictionary for instant, reliable translation
            if (staticUITranslations[targetLang] && staticUITranslations[targetLang][text]) {
                return staticUITranslations[targetLang][text];
            }

            // Priority 2: Use the external API for less common phrases (e.g., Telugu, French, or unknown data)
            console.log(`Calling API for translation: ${text} to ${targetLang}`);
            
            const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: `Translate the following short text to ${targetLang}: "${text}"` }] }],
                    systemInstruction: { parts: [{ text: "You are a translation service. Respond only with the translated text, do not add any quotes, context, or conversational filler." }] }
                })
            });

            if (!response.ok) {
                console.error(`Translation API call failed for ${text}. Using original text.`);
                return text; 
            }
            
            const result = await response.json();
            const translatedText = result.candidates?.[0]?.content?.parts?.[0]?.text?.trim();

            return translatedText || text;
        }


        // --- 3. DYNAMIC CROP DATA (Original Data) ---
        const originalCropData = {
            "crops": [
                {"name": "Maize (Corn)", "timeline": "80â€“110 days", "key_events": [{"day": "0", "event": "Sowing"}, {"day": "20â€“25", "event": "First Nitrogen application"}, {"day": "40â€“50", "event": "Tasseling and second Nitrogen application"}, {"day": "60â€“70", "event": "Silking and grain filling"}, {"day": "90â€“110", "event": "Harvest"}]},
                {"name": "Wheat", "timeline": "120â€“150 days", "key_events": [{"day": "0", "event": "Sowing"}, {"day": "21", "event": "First Irrigation (Crown Root Initiation)"}, {"day": "40", "event": "Second Irrigation (Jointing stage)"}, {"day": "60â€“65", "event": "Third Irrigation (Boot/Flowering stage)"}, {"day": "120+", "event": "Harvest"}]},
                {"name": "Rice", "timeline": "100â€“150 days", "key_events": [{"day": "0", "event": "Sowing in nursery"}, {"day": "20â€“25", "event": "Transplanting to main field"}, {"day": "30â€“40", "event": "Tillering (new shoots from base)"}, {"day": "60â€“70", "event": "Panicle initiation"}, {"day": "80â€“90", "event": "Flowering/Grain filling"}, {"day": "100+", "event": "Harvest"}]},
                {"name": "Potatoes", "timeline": "90â€“120 days", "key_events": [{"day": "0", "event": "Planting"}, {"day": "5â€“10", "event": "First Irrigation for germination"}, {"day": "20â€“25", "event": "First Earthing up"}, {"day": "40â€“50", "event": "Second Earthing up"}, {"day": "60â€“70", "event": "Tuber development"}, {"day": "90+", "event": "Harvest"}]},
                {"name": "Sugarcane", "timeline": "300â€“540 days", "key_events": [{"day": "0", "event": "Planting"}, {"day": "30â€“40", "event": "First Irrigation and Budding"}, {"day": "90â€“120", "event": "Tillering and first weeding"}, {"day": "150â€“200", "event": "Cane elongation"}, {"day": "300+", "event": "Harvest"}]},
                {"name": "Soybeans", "timeline": "90â€“120 days", "key_events": [{"day": "0", "event": "Sowing"}, {"day": "20â€“30", "event": "Weeding and first intercultural operation"}, {"day": "40â€“50", "event": "Flowering and pod formation"}, {"day": "60â€“70", "event": "Pod filling"}, {"day": "90+", "event": "Harvest"}]},
                {"name": "Cassava", "timeline": "240â€“540 days", "key_events": [{"day": "0", "event": "Planting stem cuttings"}, {"day": "30â€“45", "event": "First weeding"}, {"day": "60â€“90", "event": "Second weeding and Earthing up"}, {"day": "150+", "event": "Root bulking stage"}, {"day": "240+", "event": "Harvest"}]},
                {"name": "Barley", "timeline": "110â€“130 days", "key_events": [{"day": "0", "event": "Sowing"}, {"day": "20â€“25", "event": "First Irrigation"}, {"day": "40â€“45", "event": "Second Irrigation"}, {"day": "70â€“80", "event": "Flowering"}, {"day": "110+", "event": "Harvest"}]},
                {"name": "Tomatoes", "timeline": "90â€“120 days", "key_events": [{"day": "0", "event": "Transplanting"}, {"day": "5â€“10", "event": "First Irrigation"}, {"day": "20â€“25", "event": "First Fertilizer application and Weeding"}, {"day": "40â€“50", "event": "Flowering begins"}, {"day": "80â€“90", "event": "First Harvest"}]},
                {"name": "Bananas", "timeline": "365â€“540 days", "key_events": [{"day": "0", "event": "Planting"}, {"day": "90â€“120", "event": "First Fertilizer application"}, {"day": "180â€“240", "event": "Budding/Flowering"}, {"day": "270â€“300", "event": "Bunch emergence"}, {"day": "365+", "event": "Harvest"}]}
            ]
        };

        let translatedCropData; // Holds the translated version of the crop data

        // --- 4. DATA INITIALIZATION AND TRANSLATION ---
        async function translateAndPopulateData() {
            // Translate the main UI elements
            document.getElementById('main_title').textContent = await translateText(document.getElementById('main_title').textContent, currentLanguage);
            document.getElementById('label_crop').textContent = await translateText("Select Crop:", currentLanguage);
            document.getElementById('label_date').textContent = await translateText("Sowing Date:", currentLanguage);
            document.getElementById('btn_submit').textContent = await translateText("Generate Calendar", currentLanguage);
            document.getElementById('initial_msg').textContent = await translateText("Select a crop and sowing date to generate its lifecycle calendar.", currentLanguage);

            // Create a deep copy of the original data to translate
            translatedCropData = JSON.parse(JSON.stringify(originalCropData));

            // Translate all dynamic text fields (Crop Names and Event Descriptions)
            for (const crop of translatedCropData.crops) {
                // Translate Crop Name
                crop.name = await translateText(crop.name, currentLanguage);

                // Translate Key Events
                for (const event of crop.key_events) {
                    event.event = await translateText(event.event, currentLanguage);
                }
            }

            // Populate crop dropdown with translated names
            const cropSelect = document.getElementById('crop_name');
            cropSelect.innerHTML = ''; // Clear existing options
            translatedCropData.crops.forEach(crop => {
                const option = document.createElement('option');
                option.value = crop.name; // Use translated name as value for easy lookup
                option.textContent = crop.name;
                cropSelect.appendChild(option);
            });
        }


        // --- 5. CALENDAR GENERATION LOGIC (UPDATED) ---
        document.addEventListener('DOMContentLoaded', () => {
            // Run initial setup and translation
            translateAndPopulateData();

            document.getElementById('cropForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                const resultsDiv = document.getElementById('calendar_results');
                
                // Use translated loading message
                const loadingMsg = await translateText("Generating calendar...", currentLanguage);
                resultsDiv.innerHTML = `<p class="loading-message">${loadingMsg}</p>`;

                const cropName = document.getElementById('crop_name').value;
                const sowingDateStr = document.getElementById('sowing_date').value;

                if (!sowingDateStr) {
                    const errorMsg = await translateText("Error: Please select a sowing date.", currentLanguage);
                    resultsDiv.innerHTML = `<p class="error-message">${errorMsg}</p>`;
                    return;
                }

                const sowingDate = new Date(sowingDateStr);
                // Find the crop using the *translated* name
                const selectedCrop = translatedCropData.crops.find(crop => crop.name === cropName);

                if (!selectedCrop) {
                    const errorMsg = await translateText("Error: Crop not found in data.", currentLanguage);
                    resultsDiv.innerHTML = `<p class="error-message">${errorMsg}</p>`;
                    return;
                }

                const calendarEvents = [];
                const rangeTo = await translateText("to", currentLanguage);
                
                selectedCrop.key_events.forEach(eventData => {
                    const dayStr = eventData.day.replace('â€“', '-').replace('+', '');
                    let startDay, endDay;

                    if (dayStr.includes('-')) {
                        [startDay, endDay] = dayStr.split('-').map(Number);
                    } else {
                        startDay = Number(dayStr);
                        endDay = startDay;
                    }

                    const eventDate = new Date(sowingDate);
                    eventDate.setDate(sowingDate.getDate() + startDay);
                    
                    let dateDisplay;
                    // Format date ranges using the translated "to" word
                    if (startDay !== endDay) {
                        const endDate = new Date(sowingDate);
                        endDate.setDate(sowingDate.getDate() + endDay);
                        dateDisplay = `${eventDate.toISOString().slice(0, 10)} ${rangeTo} ${endDate.toISOString().slice(0, 10)}`;
                    } else {
                        dateDisplay = eventDate.toISOString().slice(0, 10);
                    }

                    calendarEvents.push({
                        event: eventData.event, // Already translated
                        date: dateDisplay
                    });
                });

                resultsDiv.innerHTML = '';
                if (calendarEvents.length > 0) {
                    calendarEvents.forEach(event => {
                        const eventCard = document.createElement('div');
                        eventCard.classList.add('event-card');
                        // Event is already translated
                        eventCard.innerHTML = `<h3>${event.event}</h3><p>${event.date}</p>`;
                        resultsDiv.appendChild(eventCard);
                    });
                } else {
                    const noEventsMsg = await translateText("No events found for this crop.", currentLanguage);
                    resultsDiv.innerHTML = `<p class="no-events-message">${noEventsMsg}</p>`;
                }
            });
        });
    </script>
</body>
</html>
