<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crop Lifecycle Tracker</title>
    <!-- Multilingual Font Imports -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&family=Noto+Sans+Tamil:wght@400;700&family=Noto+Sans+Telugu:wght@400;700&family=Noto+Sans+Malayalam:wght@400;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* ================= THEME ================= */
        :root {
            --primary-color: #2e7d32;
            --secondary-color: #5d4037;
            --background-color: #e8f5e9;
            --header-bg: #2e7d32;
            --header-text: #fff;
            --text-color: #333;
            --card-bg: #fff;
        }

        /* ================= BODY ================= */
        body {
            background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
            /* Updated Font Stack to support Indian languages */
            font-family: 'Noto Sans Devanagari', 'Noto Sans Tamil', 'Noto Sans Telugu', 'Noto Sans Malayalam', 'Noto Sans', 'Georgia', serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* ================= iPHONE 16 PRO MAX FRAME ================= */
        .mobile-frame {
            width: 430px;
            height: 932px;
            background: #fff;
            border-radius: 50px;
            border: 12px solid #111;
            box-shadow: 0 25px 60px rgba(0,0,0,0.4);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Notch (kept for visual fidelity) */
        .notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 180px;
            height: 30px;
            background: #111;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            z-index: 10;
        }

        /* ================= APP CONTAINER ================= */
        .container {
            flex: 1;
            background: var(--card-bg);
            border-radius: 0;
            padding: 25px;
            text-align: center;
            animation: fadeIn 0.8s ease-in-out;
            overflow-y: auto;
        }

        /* ================= HEADER ================= */
        .container h1 {
            font-size: 22px;
            color: var(--primary-color);
            margin-bottom: 20px;
            line-height: 1.4;
        }

        /* ================= FORM ================= */
        .input-group { 
            text-align: left;
            margin-bottom: 18px;
        }

        .input-group label {
            font-size: 14px;
            font-weight: 600;
            display: block;
            margin-bottom: 6px;
            color: var(--text-color);
        }

        .input-group select,
        .input-group input[type="date"] {
            width: 100%;
            padding: 12px 14px;
            border-radius: 10px;
            border: 2px solid #ccc;
            font-size: 15px;
            transition: 0.3s;
            background-color: #fff; 
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            position: relative;
            font-family: inherit; /* Inherit new multilingual font stack */
        }

        /* Custom arrow for select */
        .input-group select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666' width='24px' height='24px'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            padding-right: 30px;
        }
        
        /* Clear default date picker icon for consistency */
        .input-group input[type="date"]::-webkit-calendar-picker-indicator {
            background: none;
            width: 24px;
            height: 24px;
            cursor: pointer;
            position: absolute;
            right: 10px;
            opacity: 1;
        }

        .input-group select:focus,
        .input-group input[type="date"]:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(46,125,50,0.3);
            outline: none;
        }

        /* ================= BUTTON ================= */
        .btn {
            width: 100%;
            background: var(--primary-color);
            color: #fff;
            padding: 14px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: 0.2s;
        }
        .btn:hover { background: #1b5e20; transform: scale(1.03); }
        .btn:active { transform: scale(0.95); }

        /* ================= RESULTS ================= */
        #calendar_results {
            margin-top: 22px;
            background: var(--background-color);
            padding: 16px;
            border-radius: 14px;
            min-height: 80px;
            font-size: 15px;
            color: var(--text-color);
            animation: fadeInUp 0.6s ease;
        }

        .initial-message, .error-message, .loading-message, .no-events-message {
            opacity: 0.7;
            font-size: 14px;
            text-align: center;
            padding: 10px;
        }

        .error-message {
            color: red;
        }

        .event-card {
            background-color: #fff;
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--primary-color);
            text-align: left;
            transition: transform 0.2s ease;
        }

        .event-card:hover {
            transform: translateY(-3px);
        }

        .event-card h3 {
            margin: 0;
            font-size: 16px;
            color: var(--primary-color);
        }

        .event-card p {
            margin: 4px 0 0;
            font-size: 13px;
            color: var(--secondary-color);
        }

        /* ================= ANIMATIONS ================= */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Floating bubbles background */
        .background-animation {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        .background-animation::before,
        .background-animation::after {
            content: '';
            position: absolute;
            width: 300px; height: 300px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            animation: float 10s infinite;
        }
        .background-animation::after {
            width: 200px; height: 200px;
            top: 20%; left: 70%;
            animation-duration: 14s;
        }

        @keyframes float {
            0% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-40px) translateX(30px); }
            100% { transform: translateY(0) translateX(0); }
        }
    </style>
</head>
<body>
    <div class="background-animation"></div>

    <div class="mobile-frame">
        <div class="container">
            <header class="app-header">
                <!-- Added ID for translation -->
                <h1 id="main_title">üå± Crop Lifecycle Tracker üåæ</h1>
            </header>

            <form id="cropForm">
                <section class="input-section">
                    <div class="input-group">
                        <!-- Added ID for translation -->
                        <label for="crop_name" id="label_crop">Select Crop:</label>
                        <select name="crop_name" id="crop_name">
                        </select>
                    </div>

                    <div class="input-group">
                        <!-- Added ID for translation -->
                        <label for="sowing_date" id="label_date">Sowing Date:</label>
                        <input type="date" name="sowing_date" id="sowing_date" required>
                    </div>

                    <!-- Added ID for translation -->
                    <button type="submit" class="btn" id="btn_submit">Generate Calendar</button>
                </section>
            </form>

            <section id="calendar_results" class="schemes-section">
                <!-- Added ID for translation -->
                <p id="initial_msg" class="initial-message">Select a crop and sowing date to generate its lifecycle calendar.</p>
            </section>
        </div>
    </div>

    <script>
        // Retrieve chosen language from local storage
        const currentLanguage = localStorage.getItem("chosenLanguage") || "en";

        // --- 1. TRANSLATION DICTIONARY (Updated for Crop Lifecycle Tracker) ---
        const staticUITranslations = {
            "hi": {
                "Crop Lifecycle Tracker": "‡§´‡§∏‡§≤ ‡§ú‡•Ä‡§µ‡§®‡§ö‡§ï‡•ç‡§∞ ‡§ü‡•ç‡§∞‡•à‡§ï‡§∞",
                "Select Crop:": "‡§´‡§∏‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç:",
                "Sowing Date:": "‡§¨‡•Å‡§µ‡§æ‡§à ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ:",
                "Generate Calendar": "‡§ï‡•à‡§≤‡•á‡§Ç‡§°‡§∞ ‡§¨‡§®‡§æ‡§è‡§Ç",
                "Select a crop and sowing date to generate its lifecycle calendar.": "‡§á‡§∏‡§ï‡§æ ‡§ú‡•Ä‡§µ‡§®‡§ö‡§ï‡•ç‡§∞ ‡§ï‡•à‡§≤‡•á‡§Ç‡§°‡§∞ ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§´‡§∏‡§≤ ‡§î‡§∞ ‡§¨‡•Å‡§µ‡§æ‡§à ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§",
                "Generating calendar...": "‡§ï‡•à‡§≤‡•á‡§Ç‡§°‡§∞ ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à...",
                "Error: Please select a sowing date.": "‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡•Å‡§µ‡§æ‡§à ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§",
                "Error: Crop not found in data.": "‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ‡§°‡•á‡§ü‡§æ ‡§Æ‡•á‡§Ç ‡§´‡§∏‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä‡•§",
                "No events found for this crop.": "‡§á‡§∏ ‡§´‡§∏‡§≤ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ã‡§à ‡§á‡§µ‡•á‡§Ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§",
                "to": "‡§∏‡•á",
                "Sowing": "‡§¨‡•Å‡§µ‡§æ‡§à",
                "First Nitrogen application": "‡§™‡§π‡§≤‡§æ ‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§® ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó",
                "Tasseling and second Nitrogen application": "‡§ü‡•á‡§∏‡§≤‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§® ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó",
                "Silking and grain filling": "‡§∏‡§ø‡§≤‡•ç‡§ï‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§¶‡§æ‡§®‡§æ ‡§≠‡§∞‡§®‡§æ",
                "Harvest": "‡§ï‡§ü‡§æ‡§à",
                "First Irrigation (Crown Root Initiation)": "‡§™‡§π‡§≤‡•Ä ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à (‡§ï‡•ç‡§∞‡§æ‡§â‡§® ‡§∞‡•Ç‡§ü ‡§™‡§π‡§≤)",
                "Second Irrigation (Jointing stage)": "‡§¶‡•Ç‡§∏‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à (‡§ú‡•ã‡•ú ‡§ö‡§∞‡§£)",
                "Third Irrigation (Boot/Flowering stage)": "‡§§‡•Ä‡§∏‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à (‡§¨‡•Ç‡§ü/‡§´‡•Ç‡§≤ ‡§Ü‡§®‡•á ‡§ï‡§æ ‡§ö‡§∞‡§£)",
                "Sowing in nursery": "‡§®‡§∞‡•ç‡§∏‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§¨‡•Å‡§µ‡§æ‡§à",
                "Transplanting to main field": "‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ñ‡•á‡§§ ‡§Æ‡•á‡§Ç ‡§∞‡•ã‡§™‡§æ‡§à",
                "Tillering (new shoots from base)": "‡§ü‡§ø‡§≤‡§∞‡§ø‡§Ç‡§ó (‡§Ü‡§ß‡§æ‡§∞ ‡§∏‡•á ‡§®‡§à ‡§ü‡§π‡§®‡§ø‡§Ø‡§æ‡§Å)",
                "Panicle initiation": "‡§™‡•à‡§®‡§ø‡§ï‡§≤ ‡§ï‡•Ä ‡§™‡§π‡§≤",
                "Flowering/Grain filling": "‡§´‡•Ç‡§≤ ‡§Ü‡§®‡§æ/‡§¶‡§æ‡§®‡§æ ‡§≠‡§∞‡§®‡§æ",
                "Planting": "‡§∞‡•ã‡§™‡§£",
                "First Earthing up": "‡§™‡§π‡§≤‡§æ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ö‡§¢‡§º‡§æ‡§®‡§æ",
                "Second Earthing up": "‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ö‡§¢‡§º‡§æ‡§®‡§æ",
                "Tuber development": "‡§ï‡§Ç‡§¶ ‡§µ‡§ø‡§ï‡§æ‡§∏",
                "First Fertilizer application and Weeding": "‡§™‡§π‡§≤‡§æ ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§î‡§∞ ‡§®‡§ø‡§∞‡§æ‡§à",
                "Flowering begins": "‡§´‡•Ç‡§≤ ‡§Ü‡§®‡§æ ‡§∂‡•Å‡§∞‡•Ç",
                "First Harvest": "‡§™‡§π‡§≤‡•Ä ‡§ï‡§ü‡§æ‡§à",
                "First Fertilizer application": "‡§™‡§π‡§≤‡§æ ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó",
                "Budding/Flowering": "‡§ï‡§≤‡§ø‡§ï‡§æ/‡§´‡•Ç‡§≤ ‡§Ü‡§®‡§æ",
                "Bunch emergence": "‡§ó‡•Å‡§ö‡•ç‡§õ‡§æ ‡§ï‡§æ ‡§â‡§≠‡§∞‡§®‡§æ",
                "Planting stem cuttings": "‡§§‡§®‡•á ‡§ï‡•Ä ‡§ï‡§ü‡§ø‡§Ç‡§ó ‡§∞‡•ã‡§™‡§®‡§æ",
                "First weeding": "‡§™‡§π‡§≤‡•Ä ‡§®‡§ø‡§∞‡§æ‡§à",
                "Second weeding and Earthing up": "‡§¶‡•Ç‡§∏‡§∞‡•Ä ‡§®‡§ø‡§∞‡§æ‡§à ‡§î‡§∞ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ö‡§¢‡§º‡§æ‡§®‡§æ",
                "Root bulking stage": "‡§ú‡§°‡§º ‡§´‡•Ç‡§≤‡§®‡•á ‡§ï‡§æ ‡§ö‡§∞‡§£",
                "Weeding and first intercultural operation": "‡§®‡§ø‡§∞‡§æ‡§à ‡§î‡§∞ ‡§™‡§π‡§≤‡§æ ‡§Ö‡§Ç‡§§‡§∞-‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§®",
                "Flowering and pod formation": "‡§´‡•Ç‡§≤ ‡§Ü‡§®‡§æ ‡§î‡§∞ ‡§´‡§≤‡•Ä ‡§¨‡§®‡§®‡§æ",
                "Pod filling": "‡§´‡§≤‡•Ä ‡§≠‡§∞‡§®‡§æ",
                "Maize (Corn)": "‡§Æ‡§ï‡•ç‡§ï‡§æ (‡§ï‡•â‡§∞‡•ç‡§®)",
                "Wheat": "‡§ó‡•á‡§π‡•Ç‡§Å",
                "Rice": "‡§ö‡§æ‡§µ‡§≤",
                "Potatoes": "‡§Ü‡§≤‡•Ç",
                "Sugarcane": "‡§ó‡§®‡•ç‡§®‡§æ",
                "Soybeans": "‡§∏‡•ã‡§Ø‡§æ‡§¨‡•Ä‡§®",
                "Cassava": "‡§ï‡§∏‡§æ‡§µ‡§æ",
                "Barley": "‡§ú‡•å",
                "Tomatoes": "‡§ü‡§Æ‡§æ‡§ü‡§∞",
                "Bananas": "‡§ï‡•á‡§≤‡•á"
            },
            // Tamil (ta) Translations
            "ta": {
                "Crop Lifecycle Tracker": "‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡Æµ‡Ææ‡Æ¥‡Øç‡Æï‡Øç‡Æï‡Øà‡Æö‡Øç ‡Æö‡ØÅ‡Æ¥‡Æ±‡Øç‡Æö‡Æø ‡Æï‡Æ£‡Øç‡Æï‡Ææ‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡Æ©‡Øç",
                "Select Crop:": "‡Æ™‡ÆØ‡Æø‡Æ∞‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç:",
                "Sowing Date:": "‡Æµ‡Æø‡Æ§‡Øà‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Øá‡Æ§‡Æø:",
                "Generate Calendar": "‡Æ®‡Ææ‡Æü‡Øç‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æø‡ÆØ‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
                "Select a crop and sowing date to generate its lifecycle calendar.": "‡ÆÖ‡Æ§‡Æ©‡Øç ‡Æµ‡Ææ‡Æ¥‡Øç‡Æï‡Øç‡Æï‡Øà‡Æö‡Øç ‡Æö‡ØÅ‡Æ¥‡Æ±‡Øç‡Æö‡Æø ‡Æ®‡Ææ‡Æü‡Øç‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æø‡ÆØ‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï ‡Æí‡Æ∞‡ØÅ ‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Æø‡Æ§‡Øà‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Øá‡Æ§‡Æø‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.",
                "Generating calendar...": "‡Æ®‡Ææ‡Æü‡Øç‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æø ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...",
                "Error: Please select a sowing date.": "‡Æ™‡Æø‡Æ¥‡Øà: ‡Æµ‡Æø‡Æ§‡Øà‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Øá‡Æ§‡Æø‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.",
                "Error: Crop not found in data.": "‡Æ™‡Æø‡Æ¥‡Øà: ‡Æ§‡Æ∞‡Æµ‡ØÅ‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡Æï‡Ææ‡Æ£‡Æ™‡Øç‡Æ™‡Æü‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.",
                "No events found for this crop.": "‡Æá‡Æ®‡Øç‡Æ§‡Æ™‡Øç ‡Æ™‡ÆØ‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æ®‡Æø‡Æï‡Æ¥‡Øç‡Æµ‡ØÅ‡Æï‡Æ≥‡Øç ‡Æé‡Æ§‡ØÅ‡Æµ‡ØÅ‡ÆÆ‡Øç ‡Æï‡Ææ‡Æ£‡Æ™‡Øç‡Æ™‡Æü‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.",
                "to": "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç",
                "Sowing": "‡Æµ‡Æø‡Æ§‡Øà‡Æ§‡Øç‡Æ§‡Æ≤‡Øç",
                "First Nitrogen application": "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç ‡Æ®‡Øà‡Æü‡Øç‡Æ∞‡Æú‡Æ©‡Øç ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Ææ‡Æü‡ØÅ",
                "Tasseling and second Nitrogen application": "‡Æ§‡Ææ‡Æ∏‡Øç‡Æ≤‡Æø‡Æô‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æ∞‡Æ£‡Øç‡Æü‡Ææ‡Æµ‡Æ§‡ØÅ ‡Æ®‡Øà‡Æü‡Øç‡Æ∞‡Æú‡Æ©‡Øç ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Ææ‡Æü‡ØÅ",
                "Silking and grain filling": "‡Æö‡Æø‡Æ≤‡Øç‡Æï‡Øç‡Æï‡Æø‡Æô‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Ææ‡Æ©‡Æø‡ÆØ ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡ØÅ‡Æ§‡Æ≤‡Øç",
                "Harvest": "‡ÆÖ‡Æ±‡ØÅ‡Æµ‡Æü‡Øà",
                "First Irrigation (Crown Root Initiation)": "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç ‡Æ®‡ØÄ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Ææ‡Æö‡Æ©‡ÆÆ‡Øç (‡Æï‡Æø‡Æ∞‡Æµ‡ØÅ‡Æ©‡Øç ‡Æ∞‡ØÇ‡Æü‡Øç ‡ÆÜ‡Æ∞‡ÆÆ‡Øç‡Æ™‡ÆÆ‡Øç)",
                "Second Irrigation (Jointing stage)": "‡Æá‡Æ∞‡Æ£‡Øç‡Æü‡Ææ‡Æµ‡Æ§‡ØÅ ‡Æ®‡ØÄ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Ææ‡Æö‡Æ©‡ÆÆ‡Øç (‡Æá‡Æ£‡Øà‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æ≤‡Øà)",
                "Third Irrigation (Boot/Flowering stage)": "‡ÆÆ‡ØÇ‡Æ©‡Øç‡Æ±‡Ææ‡Æµ‡Æ§‡ØÅ ‡Æ®‡ØÄ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Ææ‡Æö‡Æ©‡ÆÆ‡Øç (‡Æ™‡ØÇ‡Æü‡Øç/‡Æ™‡ØÇ‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æ≤‡Øà)",
                "Sowing in nursery": "‡Æ®‡Ææ‡Æ±‡Øç‡Æ±‡Æô‡Øç‡Æï‡Ææ‡Æ≤‡Æø‡Æ≤‡Øç ‡Æµ‡Æø‡Æ§‡Øà‡Æ§‡Øç‡Æ§‡Æ≤‡Øç",
                "Transplanting to main field": "‡ÆÆ‡ØÅ‡Æ§‡Æ©‡Øç‡ÆÆ‡Øà‡Æï‡Øç ‡Æï‡Æ≥‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ ‡Æá‡Æü‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡ÆÆ‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡Æ≤‡Øç",
                "Tillering (new shoots from base)": "‡Æü‡Æø‡Æ≤‡Øç‡Æ≤‡Æ∞‡Æø‡Æô‡Øç (‡ÆÖ‡Æü‡Æø‡Æµ‡Ææ‡Æ∞‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æá‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ ‡Æ§‡Æ≥‡Æø‡Æ∞‡Øç‡Æï‡Æ≥‡Øç)",
                "Panicle initiation": "‡Æ™‡Ææ‡Æ©‡Æø‡Æï‡Æø‡Æ≤‡Øç ‡ÆÜ‡Æ∞‡ÆÆ‡Øç‡Æ™‡ÆÆ‡Øç",
                "Flowering/Grain filling": "‡Æ™‡ØÇ‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç/‡Æ§‡Ææ‡Æ©‡Æø‡ÆØ ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡ØÅ‡Æ§‡Æ≤‡Øç",
                "Planting": "‡Æ®‡Æü‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡Æ≤‡Øç",
                "First Earthing up": "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç ‡ÆÆ‡Æ£‡Øç ‡ÆÖ‡Æ£‡Øà‡Æ§‡Øç‡Æ§‡Æ≤‡Øç",
                "Second Earthing up": "‡Æá‡Æ∞‡Æ£‡Øç‡Æü‡Ææ‡Æµ‡Æ§‡ØÅ ‡ÆÆ‡Æ£‡Øç ‡ÆÖ‡Æ£‡Øà‡Æ§‡Øç‡Æ§‡Æ≤‡Øç",
                "Tuber development": "‡Æï‡Æø‡Æ¥‡Æô‡Øç‡Æï‡ØÅ ‡Æµ‡Æ≥‡Æ∞‡Øç‡Æö‡Øç‡Æö‡Æø",
                "First Fertilizer application and Weeding": "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç ‡Æâ‡Æ∞‡ÆÆ‡Æø‡Æü‡ØÅ‡Æ§‡Æ≤‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æï‡Æ≥‡Øà ‡Æé‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ≤‡Øç",
                "Flowering begins": "‡Æ™‡ØÇ‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡ÆÜ‡Æ∞‡ÆÆ‡Øç‡Æ™‡ÆÆ‡Øç",
                "First Harvest": "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç ‡ÆÖ‡Æ±‡ØÅ‡Æµ‡Æü‡Øà",
                "First Fertilizer application": "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç ‡Æâ‡Æ∞ ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Ææ‡Æü‡ØÅ",
                "Budding/Flowering": "‡ÆÆ‡Øä‡Æü‡Øç‡Æü‡ØÅ ‡Æµ‡Æø‡Æü‡ØÅ‡Æ§‡Æ≤‡Øç/‡Æ™‡ØÇ‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç",
                "Bunch emergence": "‡Æï‡Øä‡Æ§‡Øç‡Æ§‡ØÅ ‡Æµ‡ØÜ‡Æ≥‡Æø‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Æ≤‡Øç",
                "Planting stem cuttings": "‡Æ§‡Æ£‡Øç‡Æü‡ØÅ ‡Æµ‡ØÜ‡Æü‡Øç‡Æü‡ØÅ‡Æï‡Æ≥‡Øà ‡Æ®‡Æü‡ØÅ‡Æ§‡Æ≤‡Øç",
                "First weeding": "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç ‡Æï‡Æ≥‡Øà ‡Æé‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ≤‡Øç",
                "Second weeding and Earthing up": "‡Æá‡Æ∞‡Æ£‡Øç‡Æü‡Ææ‡Æµ‡Æ§‡ØÅ ‡Æï‡Æ≥‡Øà ‡Æé‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ≤‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡Æ£‡Øç ‡ÆÖ‡Æ£‡Øà‡Æ§‡Øç‡Æ§‡Æ≤‡Øç",
                "Root bulking stage": "‡Æµ‡Øá‡Æ∞‡Øç ‡Æ™‡ØÜ‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æ≤‡Øà",
                "Weeding and first intercultural operation": "‡Æï‡Æ≥‡Øà ‡Æé‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ≤‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç ‡Æä‡Æü‡ØÅ‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡Æö‡ØÜ‡ÆØ‡Æ≤‡Øç‡Æ™‡Ææ‡Æü‡ØÅ",
                "Flowering and pod formation": "‡Æ™‡ØÇ‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æï‡Ææ‡ÆØ‡Øç ‡ÆÖ‡ÆÆ‡Øà‡Æ§‡Øç‡Æ§‡Æ≤‡Øç",
                "Pod filling": "‡Æï‡Ææ‡ÆØ‡Øç ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡ØÅ‡Æ§‡Æ≤‡Øç",
                "Maize (Corn)": "‡ÆÆ‡Æï‡Øç‡Æï‡Ææ‡Æö‡Øç‡Æö‡Øã‡Æ≥‡ÆÆ‡Øç (‡Æö‡Øã‡Æ≥‡ÆÆ‡Øç)",
                "Wheat": "‡Æï‡Øã‡Æ§‡ØÅ‡ÆÆ‡Øà",
                "Rice": "‡ÆÖ‡Æ∞‡Æø‡Æö‡Æø",
                "Potatoes": "‡Æâ‡Æ∞‡ØÅ‡Æ≥‡Øà‡Æï‡Øç‡Æï‡Æø‡Æ¥‡Æô‡Øç‡Æï‡ØÅ",
                "Sugarcane": "‡Æï‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ",
                "Soybeans": "‡Æö‡Øã‡ÆØ‡Ææ‡Æ™‡ØÄ‡Æ©‡Øç‡Æ∏‡Øç",
                "Cassava": "‡ÆÆ‡Æ∞‡Æµ‡Æ≥‡Øç‡Æ≥‡Æø‡Æï‡Øç‡Æï‡Æø‡Æ¥‡Æô‡Øç‡Æï‡ØÅ",
                "Barley": "‡Æ™‡Ææ‡Æ∞‡Øç‡Æ≤‡Æø",
                "Tomatoes": "‡Æ§‡Æï‡Øç‡Æï‡Ææ‡Æ≥‡Æø",
                "Bananas": "‡Æµ‡Ææ‡Æ¥‡Øà‡Æ™‡Øç‡Æ™‡Æ¥‡Æô‡Øç‡Æï‡Æ≥‡Øç"
            },
            // Malayalam (ml) Translations
            "ml": {
                "Crop Lifecycle Tracker": "‡¥µ‡¥ø‡¥≥‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥ú‡µÄ‡¥µ‡¥ø‡¥§ ‡¥ö‡¥ï‡µç‡¥∞‡¥Ç ‡¥ü‡µç‡¥∞‡¥æ‡¥ï‡µç‡¥ï‡µº",
                "Select Crop:": "‡¥µ‡¥ø‡¥≥ ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï:",
                "Sowing Date:": "‡¥µ‡¥ø‡¥§‡µç‡¥§‡µç ‡¥µ‡¥ø‡¥§‡¥ö‡µç‡¥ö ‡¥§‡µÄ‡¥Ø‡¥§‡¥ø:",
                "Generate Calendar": "‡¥ï‡¥≤‡¥£‡µç‡¥ü‡µº ‡¥∏‡µÉ‡¥∑‡µç‡¥ü‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï",
                "Select a crop and sowing date to generate its lifecycle calendar.": "‡¥Ö‡¥§‡¥ø‡µª‡µç‡¥±‡µÜ ‡¥ú‡µÄ‡¥µ‡¥ø‡¥§ ‡¥ö‡¥ï‡µç‡¥∞ ‡¥ï‡¥≤‡¥£‡µç‡¥ü‡µº ‡¥∏‡µÉ‡¥∑‡µç‡¥ü‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥í‡¥∞‡µÅ ‡¥µ‡¥ø‡¥≥‡¥Ø‡µÅ‡¥Ç ‡¥µ‡¥ø‡¥§‡¥ö‡µç‡¥ö ‡¥§‡µÄ‡¥Ø‡¥§‡¥ø‡¥Ø‡µÅ‡¥Ç ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï.",
                "Generating calendar...": "‡¥ï‡¥≤‡¥£‡µç‡¥ü‡µº ‡¥∏‡µÉ‡¥∑‡µç‡¥ü‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ...",
                "Error: Please select a sowing date.": "‡¥™‡¥ø‡¥∂‡¥ï‡µç: ‡¥µ‡¥ø‡¥§‡¥ö‡µç‡¥ö ‡¥§‡µÄ‡¥Ø‡¥§‡¥ø ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï.",
                "Error: Crop not found in data.": "‡¥™‡¥ø‡¥∂‡¥ï‡µç: ‡¥°‡¥æ‡¥±‡µç‡¥±‡¥Ø‡¥ø‡µΩ ‡¥µ‡¥ø‡¥≥ ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥ø‡¥≤‡µç‡¥≤.",
                "No events found for this crop.": "‡¥à ‡¥µ‡¥ø‡¥≥‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µç ‡¥á‡¥µ‡µª‡µç‡¥±‡µÅ‡¥ï‡¥≥‡µä‡¥®‡µç‡¥®‡µÅ‡¥Ç ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥ø‡¥≤‡µç‡¥≤.",
                "to": "‡¥Æ‡µÅ‡¥§‡µΩ",
                "Sowing": "‡¥µ‡¥ø‡¥§‡µç‡¥§‡µç ‡¥µ‡¥ø‡¥§‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µΩ",
                "First Nitrogen application": "‡¥Ü‡¥¶‡µç‡¥Ø‡¥§‡µç‡¥§‡µÜ ‡¥®‡µà‡¥ü‡µç‡¥∞‡¥ú‡µª ‡¥™‡µç‡¥∞‡¥Ø‡µã‡¥ó‡¥Ç",
                "Tasseling and second Nitrogen application": "‡¥ü‡¥æ‡¥∏‡µç‡¥∏‡µÜ‡¥≤‡¥ø‡¥Ç‡¥ó‡µÅ‡¥Ç ‡¥∞‡¥£‡µç‡¥ü‡¥æ‡¥Æ‡¥§‡µç‡¥§‡µÜ ‡¥®‡µà‡¥ü‡µç‡¥∞‡¥ú‡µª ‡¥™‡µç‡¥∞‡¥Ø‡µã‡¥ó‡¥µ‡µÅ‡¥Ç",
                "Silking and grain filling": "‡¥∏‡¥ø‡µΩ‡¥ï‡µç‡¥ï‡¥ø‡¥Ç‡¥ó‡µÅ‡¥Ç ‡¥ß‡¥æ‡¥®‡µç‡¥Ø‡¥Ç ‡¥®‡¥ø‡¥±‡¥Ø‡µç‡¥ï‡µç‡¥ï‡¥≤‡µÅ‡¥Ç",
                "Harvest": "‡¥µ‡¥ø‡¥≥‡¥µ‡µÜ‡¥ü‡µÅ‡¥™‡µç‡¥™‡µç",
                "First Irrigation (Crown Root Initiation)": "‡¥Ü‡¥¶‡µç‡¥Ø‡¥§‡µç‡¥§‡µÜ ‡¥ú‡¥≤‡¥∏‡µá‡¥ö‡¥®‡¥Ç (‡¥ï‡µç‡¥∞‡µó‡µ∫ ‡¥±‡µÇ‡¥ü‡µç‡¥ü‡µç ‡¥á‡¥®‡¥ø‡¥∑‡µç‡¥Ø‡µá‡¥∑‡µª)",
                "Second Irrigation (Jointing stage)": "‡¥∞‡¥£‡µç‡¥ü‡¥æ‡¥Æ‡¥§‡µç‡¥§‡µÜ ‡¥ú‡¥≤‡¥∏‡µá‡¥ö‡¥®‡¥Ç (‡¥ú‡µã‡¥Ø‡¥ø‡µª‡µç‡¥±‡¥ø‡¥Ç‡¥ó‡µç ‡¥ò‡¥ü‡µç‡¥ü‡¥Ç)",
                "Third Irrigation (Boot/Flowering stage)": "‡¥Æ‡µÇ‡¥®‡µç‡¥®‡¥æ‡¥Æ‡¥§‡µç‡¥§‡µÜ ‡¥ú‡¥≤‡¥∏‡µá‡¥ö‡¥®‡¥Ç (‡¥¨‡µÇ‡¥ü‡µç‡¥ü‡µç/‡¥™‡µÇ‡¥µ‡¥ø‡¥ü‡µÅ‡¥®‡µç‡¥® ‡¥ò‡¥ü‡µç‡¥ü‡¥Ç)",
                "Sowing in nursery": "‡¥®‡µá‡¥¥‡µç‡¥∏‡¥±‡¥ø‡¥Ø‡¥ø‡µΩ ‡¥µ‡¥ø‡¥§‡µç‡¥§‡µç ‡¥µ‡¥ø‡¥§‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µΩ",
                "Transplanting to main field": "‡¥™‡µç‡¥∞‡¥ß‡¥æ‡¥® ‡¥µ‡¥Ø‡¥≤‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥™‡¥±‡¥ø‡¥ö‡µç‡¥ö‡µÅ‡¥®‡¥ü‡µΩ",
                "Tillering (new shoots from base)": "‡¥ï‡¥≥ ‡¥™‡¥±‡¥ø‡¥ï‡µç‡¥ï‡µΩ (‡¥Ö‡¥ü‡¥ø‡¥§‡µç‡¥§‡¥ü‡µç‡¥ü‡¥ø‡µΩ ‡¥®‡¥ø‡¥®‡µç‡¥®‡µÅ‡¥≥‡µç‡¥≥ ‡¥™‡µÅ‡¥§‡¥ø‡¥Ø ‡¥ö‡¥ø‡¥®‡¥™‡µç‡¥™‡µÅ‡¥ï‡µæ)",
                "Panicle initiation": "‡¥™‡¥æ‡¥®‡¥ø‡¥ï‡µç‡¥ï‡¥ø‡µæ ‡¥Ü‡¥∞‡¥Ç‡¥≠‡¥Ç",
                "Flowering/Grain filling": "‡¥™‡µÇ‡¥µ‡¥ø‡¥ü‡µΩ/‡¥ß‡¥æ‡¥®‡µç‡¥Ø‡¥Ç ‡¥®‡¥ø‡¥±‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µΩ",
                "Planting": "‡¥®‡¥ü‡µÄ‡µΩ",
                "First Earthing up": "‡¥Ü‡¥¶‡µç‡¥Ø‡¥§‡µç‡¥§‡µÜ ‡¥Æ‡¥£‡µç‡¥£‡µç ‡¥ï‡µÇ‡¥ü‡µç‡¥ü‡µΩ",
                "Second Earthing up": "‡¥∞‡¥£‡µç‡¥ü‡¥æ‡¥Æ‡¥§‡µç‡¥§‡µÜ ‡¥Æ‡¥£‡µç‡¥£‡µç ‡¥ï‡µÇ‡¥ü‡µç‡¥ü‡µΩ",
                "Tuber development": "‡¥ï‡¥ø‡¥¥‡¥ô‡µç‡¥ô‡µç ‡¥µ‡¥ø‡¥ï‡¥∏‡¥®‡¥Ç",
                "First Fertilizer application and Weeding": "‡¥Ü‡¥¶‡µç‡¥Ø‡¥§‡µç‡¥§‡µÜ ‡¥µ‡¥≥‡¥™‡µç‡¥∞‡¥Ø‡µã‡¥ó‡¥µ‡µÅ‡¥Ç ‡¥ï‡¥≥ ‡¥™‡¥±‡¥ø‡¥ï‡µç‡¥ï‡¥≤‡µÅ‡¥Ç",
                "Flowering begins": "‡¥™‡µÇ‡¥µ‡¥ø‡¥ü‡µΩ ‡¥Ü‡¥∞‡¥Ç‡¥≠‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ",
                "First Harvest": "‡¥Ü‡¥¶‡µç‡¥Ø‡¥§‡µç‡¥§‡µÜ ‡¥µ‡¥ø‡¥≥‡¥µ‡µÜ‡¥ü‡µÅ‡¥™‡µç‡¥™‡µç",
                "First Fertilizer application": "‡¥Ü‡¥¶‡µç‡¥Ø‡¥§‡µç‡¥§‡µÜ ‡¥µ‡¥≥‡¥™‡µç‡¥∞‡¥Ø‡µã‡¥ó‡¥Ç",
                "Budding/Flowering": "‡¥Æ‡µÅ‡¥ï‡µÅ‡¥≥‡¥®‡¥Ç/‡¥™‡µÇ‡¥µ‡¥ø‡¥ü‡µΩ",
                "Bunch emergence": "‡¥ï‡µÅ‡¥≤ ‡¥™‡µÅ‡¥±‡¥§‡µç‡¥§‡µÅ‡¥µ‡¥∞‡µΩ",
                "Planting stem cuttings": "‡¥§‡¥£‡µç‡¥ü‡µç ‡¥Æ‡µÅ‡¥±‡¥ø‡¥ö‡µç‡¥ö‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§‡µç ‡¥®‡¥ü‡µÄ‡µΩ",
                "First weeding": "‡¥Ü‡¥¶‡µç‡¥Ø‡¥§‡µç‡¥§‡µÜ ‡¥ï‡¥≥ ‡¥™‡¥±‡¥ø‡¥ï‡µç‡¥ï‡µΩ",
                "Second weeding and Earthing up": "‡¥∞‡¥£‡µç‡¥ü‡¥æ‡¥Æ‡¥§‡µç‡¥§‡µÜ ‡¥ï‡¥≥ ‡¥™‡¥±‡¥ø‡¥ï‡µç‡¥ï‡¥≤‡µÅ‡¥Ç ‡¥Æ‡¥£‡µç‡¥£‡µç ‡¥ï‡µÇ‡¥ü‡µç‡¥ü‡¥≤‡µÅ‡¥Ç",
                "Root bulking stage": "‡¥µ‡µá‡¥∞‡µÅ‡¥ï‡µæ ‡¥µ‡¥≤‡µÅ‡¥§‡¥æ‡¥ï‡µÅ‡¥®‡µç‡¥® ‡¥ò‡¥ü‡µç‡¥ü‡¥Ç",
                "Weeding and first intercultural operation": "‡¥ï‡¥≥ ‡¥™‡¥±‡¥ø‡¥ï‡µç‡¥ï‡¥≤‡µÅ‡¥Ç ‡¥Ü‡¥¶‡µç‡¥Ø‡¥§‡µç‡¥§‡µÜ ‡¥á‡¥ü‡¥µ‡¥ø‡¥≥ ‡¥™‡µç‡¥∞‡¥µ‡µº‡¥§‡µç‡¥§‡¥®‡¥µ‡µÅ‡¥Ç",
                "Flowering and pod formation": "‡¥™‡µÇ‡¥µ‡¥ø‡¥ü‡¥≤‡µÅ‡¥Ç ‡¥ï‡¥æ‡¥Ø‡µç ‡¥∞‡µÇ‡¥™‡µÄ‡¥ï‡¥∞‡¥£‡¥µ‡µÅ‡¥Ç",
                "Pod filling": "‡¥ï‡¥æ‡¥Ø‡µç ‡¥®‡¥ø‡¥±‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µΩ",
                "Maize (Corn)": "‡¥ö‡µã‡¥≥‡¥Ç",
                "Wheat": "‡¥ó‡µã‡¥§‡¥Æ‡µç‡¥™‡µç",
                "Rice": "‡¥®‡µÜ‡¥≤‡µç‡¥≤‡µç",
                "Potatoes": "‡¥â‡¥∞‡µÅ‡¥≥‡¥ï‡µç‡¥ï‡¥ø‡¥¥‡¥ô‡µç‡¥ô‡µç",
                "Sugarcane": "‡¥ï‡¥∞‡¥ø‡¥Æ‡µç‡¥™‡µç",
                "Soybeans": "‡¥∏‡µã‡¥Ø‡¥æ‡¥¨‡µÄ‡µª‡¥∏‡µç",
                "Cassava": "‡¥Æ‡¥∞‡¥ö‡µç‡¥ö‡µÄ‡¥®‡¥ø",
                "Barley": "‡¥¨‡¥æ‡µº‡¥≤‡¥ø",
                "Tomatoes": "‡¥§‡¥ï‡µç‡¥ï‡¥æ‡¥≥‡¥ø",
                "Bananas": "‡¥µ‡¥æ‡¥¥‡¥™‡µç‡¥™‡¥¥‡¥Ç"
            }
        };

        // --- 2. TRANSLATION CORE LOGIC ---
        async function translateText(text, targetLang) {
            if (targetLang === "en") return text;
            
            // Priority 1: Check the local dictionary for instant, reliable translation
            if (staticUITranslations[targetLang] && staticUITranslations[targetLang][text]) {
                return staticUITranslations[targetLang][text];
            }

            // Priority 2: Use the external API for less common phrases (e.g., Telugu, French, or unknown data)
            console.log(`Calling API for translation: ${text} to ${targetLang}`);
            
            const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: `Translate the following short text to ${targetLang}: "${text}"` }] }],
                    systemInstruction: { parts: [{ text: "You are a translation service. Respond only with the translated text, do not add any quotes, context, or conversational filler." }] }
                })
            });

            if (!response.ok) {
                console.error(`Translation API call failed for ${text}. Using original text.`);
                return text; 
            }
            
            const result = await response.json();
            const translatedText = result.candidates?.[0]?.content?.parts?.[0]?.text?.trim();

            return translatedText || text;
        }


        // --- 3. DYNAMIC CROP DATA (Original Data) ---
        const originalCropData = {
            "crops": [
                {"name": "Maize (Corn)", "timeline": "80‚Äì110 days", "key_events": [{"day": "0", "event": "Sowing"}, {"day": "20‚Äì25", "event": "First Nitrogen application"}, {"day": "40‚Äì50", "event": "Tasseling and second Nitrogen application"}, {"day": "60‚Äì70", "event": "Silking and grain filling"}, {"day": "90‚Äì110", "event": "Harvest"}]},
                {"name": "Wheat", "timeline": "120‚Äì150 days", "key_events": [{"day": "0", "event": "Sowing"}, {"day": "21", "event": "First Irrigation (Crown Root Initiation)"}, {"day": "40", "event": "Second Irrigation (Jointing stage)"}, {"day": "60‚Äì65", "event": "Third Irrigation (Boot/Flowering stage)"}, {"day": "120+", "event": "Harvest"}]},
                {"name": "Rice", "timeline": "100‚Äì150 days", "key_events": [{"day": "0", "event": "Sowing in nursery"}, {"day": "20‚Äì25", "event": "Transplanting to main field"}, {"day": "30‚Äì40", "event": "Tillering (new shoots from base)"}, {"day": "60‚Äì70", "event": "Panicle initiation"}, {"day": "80‚Äì90", "event": "Flowering/Grain filling"}, {"day": "100+", "event": "Harvest"}]},
                {"name": "Potatoes", "timeline": "90‚Äì120 days", "key_events": [{"day": "0", "event": "Planting"}, {"day": "5‚Äì10", "event": "First Irrigation for germination"}, {"day": "20‚Äì25", "event": "First Earthing up"}, {"day": "40‚Äì50", "event": "Second Earthing up"}, {"day": "60‚Äì70", "event": "Tuber development"}, {"day": "90+", "event": "Harvest"}]},
                {"name": "Sugarcane", "timeline": "300‚Äì540 days", "key_events": [{"day": "0", "event": "Planting"}, {"day": "30‚Äì40", "event": "First Irrigation and Budding"}, {"day": "90‚Äì120", "event": "Tillering and first weeding"}, {"day": "150‚Äì200", "event": "Cane elongation"}, {"day": "300+", "event": "Harvest"}]},
                {"name": "Soybeans", "timeline": "90‚Äì120 days", "key_events": [{"day": "0", "event": "Sowing"}, {"day": "20‚Äì30", "event": "Weeding and first intercultural operation"}, {"day": "40‚Äì50", "event": "Flowering and pod formation"}, {"day": "60‚Äì70", "event": "Pod filling"}, {"day": "90+", "event": "Harvest"}]},
                {"name": "Cassava", "timeline": "240‚Äì540 days", "key_events": [{"day": "0", "event": "Planting stem cuttings"}, {"day": "30‚Äì45", "event": "First weeding"}, {"day": "60‚Äì90", "event": "Second weeding and Earthing up"}, {"day": "150+", "event": "Root bulking stage"}, {"day": "240+", "event": "Harvest"}]},
                {"name": "Barley", "timeline": "110‚Äì130 days", "key_events": [{"day": "0", "event": "Sowing"}, {"day": "20‚Äì25", "event": "First Irrigation"}, {"day": "40‚Äì45", "event": "Second Irrigation"}, {"day": "70‚Äì80", "event": "Flowering"}, {"day": "110+", "event": "Harvest"}]},
                {"name": "Tomatoes", "timeline": "90‚Äì120 days", "key_events": [{"day": "0", "event": "Transplanting"}, {"day": "5‚Äì10", "event": "First Irrigation"}, {"day": "20‚Äì25", "event": "First Fertilizer application and Weeding"}, {"day": "40‚Äì50", "event": "Flowering begins"}, {"day": "80‚Äì90", "event": "First Harvest"}]},
                {"name": "Bananas", "timeline": "365‚Äì540 days", "key_events": [{"day": "0", "event": "Planting"}, {"day": "90‚Äì120", "event": "First Fertilizer application"}, {"day": "180‚Äì240", "event": "Budding/Flowering"}, {"day": "270‚Äì300", "event": "Bunch emergence"}, {"day": "365+", "event": "Harvest"}]}
            ]
        };

        let translatedCropData; // Holds the translated version of the crop data

        // --- 4. DATA INITIALIZATION AND TRANSLATION ---
        async function translateAndPopulateData() {
            // Translate the main UI elements
            document.getElementById('main_title').textContent = await translateText(document.getElementById('main_title').textContent, currentLanguage);
            document.getElementById('label_crop').textContent = await translateText("Select Crop:", currentLanguage);
            document.getElementById('label_date').textContent = await translateText("Sowing Date:", currentLanguage);
            document.getElementById('btn_submit').textContent = await translateText("Generate Calendar", currentLanguage);
            document.getElementById('initial_msg').textContent = await translateText("Select a crop and sowing date to generate its lifecycle calendar.", currentLanguage);

            // Create a deep copy of the original data to translate
            translatedCropData = JSON.parse(JSON.stringify(originalCropData));

            // Translate all dynamic text fields (Crop Names and Event Descriptions)
            for (const crop of translatedCropData.crops) {
                // Translate Crop Name
                crop.name = await translateText(crop.name, currentLanguage);

                // Translate Key Events
                for (const event of crop.key_events) {
                    event.event = await translateText(event.event, currentLanguage);
                }
            }

            // Populate crop dropdown with translated names
            const cropSelect = document.getElementById('crop_name');
            cropSelect.innerHTML = ''; // Clear existing options
            translatedCropData.crops.forEach(crop => {
                const option = document.createElement('option');
                option.value = crop.name; // Use translated name as value for easy lookup
                option.textContent = crop.name;
                cropSelect.appendChild(option);
            });
        }


        // --- 5. CALENDAR GENERATION LOGIC (UPDATED) ---
        document.addEventListener('DOMContentLoaded', () => {
            // Run initial setup and translation
            translateAndPopulateData();

            document.getElementById('cropForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                const resultsDiv = document.getElementById('calendar_results');
                
                // Use translated loading message
                const loadingMsg = await translateText("Generating calendar...", currentLanguage);
                resultsDiv.innerHTML = `<p class="loading-message">${loadingMsg}</p>`;

                const cropName = document.getElementById('crop_name').value;
                const sowingDateStr = document.getElementById('sowing_date').value;

                if (!sowingDateStr) {
                    const errorMsg = await translateText("Error: Please select a sowing date.", currentLanguage);
                    resultsDiv.innerHTML = `<p class="error-message">${errorMsg}</p>`;
                    return;
                }

                const sowingDate = new Date(sowingDateStr);
                // Find the crop using the *translated* name
                const selectedCrop = translatedCropData.crops.find(crop => crop.name === cropName);

                if (!selectedCrop) {
                    const errorMsg = await translateText("Error: Crop not found in data.", currentLanguage);
                    resultsDiv.innerHTML = `<p class="error-message">${errorMsg}</p>`;
                    return;
                }

                const calendarEvents = [];
                const rangeTo = await translateText("to", currentLanguage);
                
                selectedCrop.key_events.forEach(eventData => {
                    const dayStr = eventData.day.replace('‚Äì', '-').replace('+', '');
                    let startDay, endDay;

                    if (dayStr.includes('-')) {
                        [startDay, endDay] = dayStr.split('-').map(Number);
                    } else {
                        startDay = Number(dayStr);
                        endDay = startDay;
                    }

                    const eventDate = new Date(sowingDate);
                    eventDate.setDate(sowingDate.getDate() + startDay);
                    
                    let dateDisplay;
                    // Format date ranges using the translated "to" word
                    if (startDay !== endDay) {
                        const endDate = new Date(sowingDate);
                        endDate.setDate(sowingDate.getDate() + endDay);
                        dateDisplay = `${eventDate.toISOString().slice(0, 10)} ${rangeTo} ${endDate.toISOString().slice(0, 10)}`;
                    } else {
                        dateDisplay = eventDate.toISOString().slice(0, 10);
                    }

                    calendarEvents.push({
                        event: eventData.event, // Already translated
                        date: dateDisplay
                    });
                });

                resultsDiv.innerHTML = '';
                if (calendarEvents.length > 0) {
                    calendarEvents.forEach(event => {
                        const eventCard = document.createElement('div');
                        eventCard.classList.add('event-card');
                        // Event is already translated
                        eventCard.innerHTML = `<h3>${event.event}</h3><p>${event.date}</p>`;
                        resultsDiv.appendChild(eventCard);
                    });
                } else {
                    const noEventsMsg = await translateText("No events found for this crop.", currentLanguage);
                    resultsDiv.innerHTML = `<p class="no-events-message">${noEventsMsg}</p>`;
                }
            });
        });
    </script>
</body>
</html>
